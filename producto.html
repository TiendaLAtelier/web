<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Detalle del Producto | L'Atelier</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Winky+Rough:ital,wght@0,300..900;1,300..900&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
  <link rel="shortcut icon" href="images/Logo_L'atelier.svg" type="image/x-icon">
  <script src="https://kit.fontawesome.com/0347546ae9.js" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
</head>

<body>
  <header class="header">
    <div class="contenedor-navegacion">
      <div class="contenedor-mensaje-envio" id="barra-envio">
        <i class="fas fa-truck icono-envio"></i>
        <p>¡Envíos gratis en toda Colombia por compras superiores a <span class="texto-bold">$70.000</span>!</p>
      </div>
      <nav class="nav contenedor" id="nav">
        <a href="index.html"><img class="nav__logo" src="images/Logo_L'atelier_Tipografia.svg" alt="Logo"/></a>
        <ul class="nav__links">
          <li class="nav__item">
            <a href="index.html" class="nav__link">Inicio</a>
          </li>
          <li class="nav__item">
            <a href="pines.html" class="nav__link">Pines</a>
          </li>
          <li class="nav__item">
            <a href="cuadros.html" class="nav__link">Cuadros</a>
          </li>
          <li class="nav__item">
            <a href="personalizados.html" class="nav__link">Personalizados</a>
          </li>
          <li class="nav__item">
            <a href="#nosotros" class="nav__link">Nosotros</a>
          </li>
          <li>
            <form id="searchForm" class="d-flex ms-lg-3 mt-3 mt-lg-0" action="busqueda.html" method="GET">
              <input id="searchInput" class="form-control me-2" type="search" name="q" placeholder="Buscar" aria-label="Buscar" required />
              <button class="btn btn-outline-light boton-buscar" type="submit">Buscar</button>
            </form>
          </li>
        </ul>

        <a href="#nav" class="nav__hamburguer">
          <img src="images/menu.svg" class="nav__icon" alt="Icono menu">
        </a>

        <a href="#" class="nav__close">
          <img src="images/close.svg" class="nav__icon" alt="Icono close">
        </a>
      </nav>
    </div>
    <!-- <div class="overlay-presentacion">
      <div class="contenedor-overlay">
        <h2>Donde tus sueños automovilísticos se hacen realidad.</h2>
        <p class="margin">Nuestro equipo de expertos está listo para ayudarte en cada paso del proceso de
          compra, desde encontrar el auto ideal hasta ofrecerte las mejores opciones de financiamiento. No
          esperes
          más, ¡visita nuestro concesionario y vive la experiencia Car Emporium!
        </p>
      </div>
    </div> -->
  </header>

<!-- Contenido del producto -->
<div class="container my-5 py-5 col-lg-pt-5">
  <div class="row">
    <!-- Imágenes del producto -->
<div class="col-md-6">
    <!-- Imagen principal -->
    <div class="mb-3 ratio ratio-1x1 bg-light rounded-3 overflow-hidden">
      <img id="imagenPrincipal" class="img-fluid w-100 h-100 object-fit-cover" src="" alt="Imagen del producto">
    </div>
    
    <!-- Galería de miniaturas -->
    <div id="galeriaImagenes" class="d-flex gap-2 overflow-auto py-2" style="min-height: 80px;">
      <!-- Las miniaturas se generarán aquí con JavaScript -->
    </div>
  </div>
    
    <!-- Información del producto -->
    <div class="col-6">
      <h1 id="nombreProducto" class="mb-3" style="color: #705DA4; font-family: 'Winky Rough', sans-serif;"></h1>
      <p id="descripcionProducto" class="lead"></p>
      <h3 id="precioProducto" class="my-4" style="color: #705DA4;"></h3>
      
      <div class="mb-4">
        <label for="cantidadProducto" class="form-label">Cantidad:</label>
        <input type="number" id="cantidadProducto" value="1" min="1" class="form-control w-25">
      </div>
      
      <button id="botonAgregar" class="btn btn-purple">
        <i class="fas fa-cart-plus"></i> Añadir al carrito
      </button>
    </div>
  </div>
  
  <!-- Productos relacionados -->
  <div class="mt-5 pt-5">
    <h3 class="mb-4" style="color: #705DA4; font-family: 'Winky Rough', sans-serif;">Productos relacionados</h3>
    <div id="relacionados" class="row g-4"></div>
  </div>
</div>

<!-- Sección Emprende con Nosotros -->
<section class="trabaja-nosotros" data-aos="fade-up">
  <div class="contenedor trabaja-nosotros" >
    <img class="imagen-trabaja-nosotros" src="images/trabajaconnosotros.jpg" alt="Imagen Emprende">
    <div class="contenedor-trabaja-nosotros" >
      <h2 class="titulo-trabaja-nosotros">¿Quieres Emprender con Nosotros?</h2>
      <p>¿Te gustaría comenzar tu propio negocio de pines? Con una compra mínima de 30 unidades, accedes a un descuento especial pensado para que obtengas un excelente margen de ganancia. Personaliza los diseños, elige los que más te gusten y empieza a vender productos únicos y creativos. 🎯 Ideal para revender, regalar o emprender desde casa.</p>   
      <p class="contactanos-trabaja-nosotros">Contáctanos para conocer los precios especiales por volumen</p>
      <a class="boton-trabaja-nosotros" href="https://wa.me/573113812334?text=Estoy%20interesado%20en%20ser%20vendedor%20de%20L'Atelier">
        <i class="fab fa-whatsapp me-2"></i> Contactar por WhatsApp
      </a>
    </div>
  </div>
</section>
<!-- Sección Emprende con Nosotros -->

<!-- Sobre Nosotros -->
<section class="sobre-nosotros" id="nosotros" data-aos="fade-up">
  <div class="contenedor contenedor-nosotros" >
    <img src="images/Logo_Letra.jpeg" class="imgagen-nosotros" alt="Logo Tienda" />
    <div class="contenedor-texto-nosotros">
      <h2 class="titulo-nosotros">Acerca de Nosotros</h2>
      <p>Eh, ¡Qué más parcer@s! En L'Atelier nos la jugamos pa’ convertir
        lo simple en pura magia. Somos expertos en crear pines de acrílico
        con resina epoxi 🎨✨, ¡unas joyitas que no solo brillan más que
        un atardecer en la costa, sino que duran pa’ toda la vida! Ideales
        pa’ que te montes en la moda y muestres tu estilo como un pro.</p>
      <p>Y si de decorar se trata, nuestros cuadros iluminados ✨ son
        una chimba: con luces que juegan y colores que se llevan las
        miradas. Transformamos tu casa u oficina en un parche lleno de
        mucho estilo.</p>
      <p>Aquí no somos solo una tienda: somos un team de locos por el arte
        que le metemos el alma a cada detalle. ¿La razón? Creemos que lo
        hecho a mano tiene ese 'ñapa' especial que ninguna máquina da. Por
        eso, desde Medellín pa’ el mundo 🇨🇴🌍, le ponemos corazón ❤️ a
        cada pin y cuadro, pa’ que tú te sientas orgulloso de llevar o
        mostrar algo único, ¡como los paisajes de nuestro país!</p>
      <p>¿La meta? Que cuando veas nuestras piezas, no solo digas "¡Qué
        chévere!", sino que sientas esa calentura en el pecho de saber que
        llevas un pedacito de arte colombiano contigo. ¡Aquí en L'Atelier,
        no vendemos cositas bonitas… vendemos historias que brillan y
        enamoran! 💫🤝 ¡A la orden, parcer@! 🛎️✨</p>
      <p class="firma-nosotros">Tienda L'Atelier</p>
    </div>
  </div>
</section>
<!-- Sobre Nosotros -->

<!-- Icono Carrito -->
<button class="icono-carrito" id="carritoIcon" aria-label="Abrir carrito">
  <i class="fa-solid fa-cart-shopping"></i><span id="contadorCarrito" class="badge bg-danger icono-contador-carrito">0</span>
</button>
<!-- Icono Carrito -->

<!-- Menú lateral -->
<div class="contenedor-carrito" id="carritoMenu">
  <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" id="botonCerrar"></button>
  <h2>Tu carrito</h2>
  <ul id="listaCarrito" class="list-unstyled mb-3"></ul>
  <div class="contenedor-totales">
    <div>
      <p>Subtotal:</p>
      <p>Envío:</p>
      <p>Total:</p>
    </div>
    <div>
      <p id="subtotalCarrito">$0.000</p>
      <p id="envioCarrito">$0.000</p>
      <p class="texto-total-carrito" id="totalCarrito">$0.000</p>
    </div>
  </div>
  <button class="boton-pagar-carrito" id="pagarBtn">Pagar por WhatsApp</button>
</div>
<!-- Menú lateral -->

<!-- Footer -->
<footer class="footer">
  <div class="contenedor contenedor-footer">
    <div class="contenedor-redes-footer">
      <div>
        <h3>Contacto</h3>
        <a href="#" class="text-center mx-2"><i class="fab fa-google icono"></i></a>
        <p>tiendalatelier@gmail.com</p>
      </div>
      <div>
        <h3>Redes Sociales</h3>
        <a href="https://www.instagram.com/tienda_latelier/" class="text-purple mx-2"><i class="fab fa-instagram icono"></i></a>
        <a href="https://www.facebook.com/profile.php?id=61557581222388" class="text-purple mx-2"><i class="fab fa-facebook icono"></i></a>
        <a href="https://www.tiktok.com/@tienda_latelier" class="text-purple mx-2"><i class="fab fa-tiktok icono"></i></a>
        <p>@tienda_latelier</p>
      </div>
      <div>
        <h3>Escríbenos</h3>
        <a href="https://wa.me/573113812334" class="text-purple mx-2"><i class="fab fa-whatsapp icono"></i></a>
        <p>+57 (311) 381 2334</p>
      </div>
    </div>
  </div>
  <div class="contenedor contenedor-copyright">
    <p>&copy; Copyright <script>document.write(new Date().getFullYear());</script> | Desarrollado por L'Atelier.</p>
  </div>
</footer>
<!-- Footer -->

<script src="script.js"></script>
<script>
    // Funciones globales
    function cambiarImagenPrincipal(nuevaImagen, elementoClickeado) {
      const imagenPrincipal = document.getElementById('imagenPrincipal');
      if (!imagenPrincipal) return;
      
      // Cambiar la imagen principal con efecto fade
      imagenPrincipal.style.opacity = '0';
      setTimeout(() => {
        imagenPrincipal.src = nuevaImagen;
        imagenPrincipal.style.opacity = '1';
      }, 150);
      
      // Actualizar miniaturas activas
      const miniaturas = document.querySelectorAll('#galeriaImagenes img');
      miniaturas.forEach(img => {
        img.style.border = '1px solid #dee2e6';
        img.style.borderWidth = '1px';
      });
      
      // Resaltar miniatura seleccionada
      if (elementoClickeado) {
        elementoClickeado.style.border = '2px solid #705DA4';
        elementoClickeado.style.borderWidth = '2px';
      }
    }
    
    function renderProductos(productos, contenedorId, titulo = '') {
      const contenedor = document.getElementById(contenedorId);
      if (!contenedor) return;
      
      contenedor.innerHTML = titulo ? `<h4 class="mb-3" style="color: #705DA4; font-family: 'Winky Rough', sans-serif;">${titulo}</h4>` : '';
      
      const row = document.createElement('div');
      row.className = 'row g-4';
      
      productos.forEach(p => {
        const col = document.createElement('div');
        col.className = 'col-6 col-lg-3 mb-4';
        col.innerHTML = `
          <div class="card h-100 shadow">
            <img src="${p.imagen}" class="card-img-top" alt="${p.nombre}" 
                 style="cursor:pointer; height: 200px; object-fit: cover;"
                 onclick="irADetalle(${JSON.stringify(p).replace(/"/g, '&quot;')})">
            <div class="card-body text-center">
              <h5 class="card-title text-purple" style="cursor:pointer" 
                  onclick="irADetalle(${JSON.stringify(p).replace(/"/g, '&quot;')})">${p.nombre}</h5>
              <p class="text-muted">$${p.precio}</p>
              <button class="btn btn-purple btn-sm" 
                      onclick="agregarAlCarrito('${p.nombre}', ${p.precio})">
                <i class="fas fa-cart-plus"></i> Añadir
              </button>
            </div>
          </div>
        `;
        row.appendChild(col);
      });
      
      contenedor.appendChild(row);
    }
    
    document.addEventListener('DOMContentLoaded', async () => {
      await cargarTodosLosProductos();
      
      const producto = JSON.parse(localStorage.getItem('productoSeleccionado'));
      if (!producto) {
        window.location.href = 'index.html';
        return;
      }
    
      // Mostrar información básica
      document.getElementById('nombreProducto').textContent = producto.nombre;
      document.getElementById('descripcionProducto').textContent = producto.descripcion || 'Descripción no disponible';
      document.getElementById('precioProducto').textContent = `$${producto.precio}`;
    
      // Configurar galería de imágenes
      const imagenPrincipal = document.getElementById('imagenPrincipal');
      const galeria = document.getElementById('galeriaImagenes');
      
      // Lista de todas las imágenes
      const todasLasImagenes = [producto.imagen];
      if (producto.imagenes_adicionales) {
        todasLasImagenes.push(...producto.imagenes_adicionales.split(',').map(img => img.trim()));
      }
    
      // Establecer imagen principal
      imagenPrincipal.src = todasLasImagenes[0];
      imagenPrincipal.onerror = function() {
        this.src = 'images/placeholder.jpg';
      };
    
      // Crear miniaturas
      galeria.innerHTML = todasLasImagenes.map((img, index) => `
        <img src="${img}" 
             class="img-thumbnail cursor-pointer" 
             style="width: 80px; height: 80px; object-fit: cover; ${index === 0 ? 'border: 2px solid #705DA4;' : 'border: 1px solid #dee2e6;'}"
             onclick="cambiarImagenPrincipal('${img}', this)"
             alt="Vista ${index + 1} del producto"
             onerror="this.src='images/placeholder-small.jpg'">
      `).join('');
    
      // Configurar botón de añadir al carrito
      document.getElementById('botonAgregar').addEventListener('click', () => {
        const cantidad = parseInt(document.getElementById('cantidadProducto').value) || 1;
        agregarAlCarrito(producto.nombre, producto.precio, cantidad);
        
      });
    
      // Cargar productos relacionados
      if (producto.etiquetas) {
        const etiquetasProducto = producto.etiquetas.toLowerCase().split(',').map(e => e.trim());
        const relacionados = allProductos.filter(p => {
          if (p.nombre === producto.nombre) return false;
          if (p.etiquetas) {
            const etiquetasP = p.etiquetas.toLowerCase().split(',').map(e => e.trim());
            return etiquetasP.some(etiqueta => etiquetasProducto.includes(etiqueta));
          }
          return false;
        }).slice(0, 4);
        
        if (relacionados.length > 0) {
          renderProductos(relacionados, 'relacionados', 'Productos relacionados');
        }
      }
    });
    </script>
</body>
</html>